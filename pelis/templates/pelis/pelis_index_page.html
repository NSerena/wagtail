{% extends "base.html" %}

{% load wagtailcore_tags %}

{% block body_class %}template-pelisindexpage{% endblock %}


{% block extra_css %}
<link rel="stylesheet" type="text/css" href="//cdn.datatables.net/1.11.4/css/jquery.dataTables.min.css">

{% endblock %}


{% block content %}

<div class="container" style="position : relative;width : 2000px;height : 99.99%;margin : 0;
padding : 0;">
    <h1 class="page-title">{{ page.title }}</h1><br>

    <p>Listado de las mejores 250 películas según IMDB:</p>
    <hr>

    <table id="peliculas" class="table table-striped">
        <thead>
            <tr>
                <td>Posición</td>
                <td>Título</td>
                <td>Año</td>
                <td>Portada</td>
            </tr>
        </thead>
        <tbody>

            {% for pelis in peliculas %}
            <tr>
                <td>{{pelis.place}}</td>
                <td>{{pelis.title}}</td>
                <td>{{pelis.year}}</td>
                <td><img src="{{pelis.imagen}}" alt="{{pelis.title}}"></td>
            </tr>

            {% endfor %}
        </tbody>
    </table>
    <hr>
    {% if peliculas.paginator.count > 1 %}
        <div class="container">
            <div class="row">
                <div class="col-md-12"><br>
                {% include "includes/pagination.html" with subpages=peliculas %}
                </div>
            </div>
        </div>
    {% endif %}
</div>

{% endblock %}

{% block extra_js %}
<script type="text/javascript" src="//code.jquery.com/jquery-3.6.0.min.js"></script>
<script type="text/javascript" src="//cdn.datatables.net/1.11.4/js/jquery.dataTables.min.js"></script>
<script type="text/javascript" src="/i18n/es_es.json"></script>

<script>
    $(document).ready(function () {
        $('#peliculas').DataTable({
            language: {
                url: '//cdn.datatables.net/plug-ins/1.11.4/i18n/es_es.json'
            }
        });
    });
</script>
{% endblock %}